<h1>Caller Tester</h1>
<p>The following gato has requested a call.</p>
<table>
 <tr><th>Name</th><td><%= @customer.firstname %> <%= @customer.lastname %></td></tr>
 <tr><th>Location</th><td><%= @customer.city %>, <%= @customer.state %></td></tr>
</table>
<button onClick="call()">Make Call</button>

<!-- <script type="text/javascript" src="https://www.twilio.com/blog//static.twilio.com/libs/twiliojs/1.2/twilio.min.js"></script> -->

<script type="text/javascript"
src="https://static.twilio.com/libs/twiliojs/1.2/twilio.min.js"></script>

<script>
// works on IE9 and above
document.addEventListener("DOMContentLoaded", function(event) {
  Twilio.Device.setup("<%= @token %>");
});

function call() {
  Twilio.Device.connect({id: "<%= @customer.id %>"});
}
</script>